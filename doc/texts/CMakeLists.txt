## CMake script for providing the main page and all static page files
##
## vim:fdm=marker
##
## Provides:
##
## - Target: libarcsdec_static_pages_files


cmake_minimum_required (VERSION 3.12 )

add_custom_target (libarcsdec_static_pages_files )
add_dependencies  (libarcsdec_static_pages_files libarcsdec_create_output_dir )


## --- Configure Static Mainpage {{{1

set (DOC_TEXTS_MAINPAGE        "${CMAKE_CURRENT_BINARY_DIR}/MAINPAGE.md" )

configure_file (MAINPAGE.md.in "${DOC_TEXTS_MAINPAGE}" @ONLY )



## --- Provide Text Files from Project Root Folder {{{1

foreach (FILE IN ITEMS "BUILD" "CODING" )

	set (DOC_SOURCES  ${DOC_SOURCES} "${PROJECT_ROOT_DIR}/${FILE}.md" )

	add_custom_command(
		TARGET libarcsdec_static_pages_files PRE_BUILD
		COMMAND "${CMAKE_COMMAND}"
		ARGS -E copy
			"${PROJECT_ROOT_DIR}/${FILE}.md"
			"${CMAKE_CURRENT_BINARY_DIR}/${FILE}.md"
		VERBATIM
	)
endforeach()


## --- Provide Static Pages {{{1

foreach (FILE IN ITEMS "How_to_use" )

	set (DOC_SOURCES  ${DOC_SOURCES} "${CMAKE_CURRENT_SOURCE_DIR}/${FILE}.md" )

	add_custom_command(
		TARGET libarcsdec_static_pages_files PRE_BUILD
		COMMAND "${CMAKE_COMMAND}"
		ARGS -E copy
			"${CMAKE_CURRENT_SOURCE_DIR}/${FILE}.md"
			"${CMAKE_CURRENT_BINARY_DIR}/${FILE}.md"
		VERBATIM
	)
endforeach()

set (DOC_SOURCES ${DOC_SOURCES} "${DOC_TEXTS_MAINPAGE}" )



## --- Update Doxygen Configuration Variables {{{1

set (DOXYGEN_USE_MDFILE_AS_MAINPAGE "${DOC_TEXTS_MAINPAGE}" PARENT_SCOPE )

set (DOXYGEN_INPUT "${DOXYGEN_INPUT} ${CMAKE_CURRENT_BINARY_DIR}" PARENT_SCOPE )

## 1}}}

